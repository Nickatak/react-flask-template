{"version":3,"sources":["redux/reducers/auth.reducers.js","redux/reducers/index.js","redux/store/makeStore.js","helpers/request.helpers.js","services/auth.services.js","redux/actions/auth.actions.js","pages/LoginPage/LoginPage.js","App.js","index.js"],"names":["user","JSON","parse","localStorage","getItem","initialState","loggedIn","rootReducer","combineReducers","state","action","type","payload","makeStore","createStore","applyMiddleware","thunkMiddleware","handleResponse","response","text","then","data","ok","status","error","statusText","Promise","reject","login","username","password","a","reqOpts","method","headers","body","stringify","fetch","requestHelpers","setItem","dispatch","authServices","console","log","success","connect","props","React","useState","setUsername","setPassword","_submitHandler","evt","preventDefault","authActions","_testProtected","_testRefresh","_testLogout","onSubmit","name","placeholder","onChange","target","value","App","store","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8f8cf797.chunk.js","sourcesContent":["\r\nconst user = JSON.parse(localStorage.getItem('user'));\r\nconst initialState = user ? {loggedIn : true, user} : { loggedIn: false, user: null };\r\n\r\nexport function authReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'LOGIN_SUCCEEDED':\r\n            return {\r\n                loggedIn : true,\r\n                user: action.payload,\r\n            };\r\n        case 'LOGIN_FAILED':\r\n            return { loggedIn: false, user: null };\r\n        case 'LOGOUT':\r\n            return { loggedIn: false, user: null };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n","import { combineReducers } from 'redux';\r\n\r\nimport { authReducer } from './auth.reducers';\r\n\r\n\r\nconst rootReducer = combineReducers({\r\n    user : authReducer,\r\n});\r\n\r\nexport default rootReducer;\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport rootReducer from '../reducers';\r\n\r\n/**\r\n * This is a factory just incase want to override anything with thunks/etc. later on.\r\n * ^ YOu see, this is why we make factories, it's not even past day 1 and we're overriding this.\r\n */\r\nconst makeStore = () => {\r\n    return createStore(\r\n        rootReducer,\r\n        applyMiddleware(thunkMiddleware)\r\n    );\r\n}\r\n\r\nexport default makeStore;\r\n","\r\nconst handleResponse = (response) => {\r\n\r\n    return response.text()\r\n    .then((text) => {\r\n        const data = text && JSON.parse(text);\r\n        if (!response.ok) {\r\n            if (response.status === 401 || response.status === 400) {\r\n                // window.location.reload(true);\r\n            }\r\n\r\n            const error = data || response.statusText;\r\n            return Promise.reject(error);\r\n        }\r\n\r\n        // If everything is fine.\r\n        return data;\r\n    });\r\n}\r\n\r\nexport {\r\n    handleResponse,\r\n}","import { requestHelpers } from '../helpers';\r\n\r\nconst login = async (username, password) => {\r\n    const reqOpts = {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type' : 'application/json'\r\n        },\r\n        body: JSON.stringify({ username, password }),\r\n    }\r\n    return fetch('/auth/obtain', reqOpts)\r\n    .then(requestHelpers.handleResponse)\r\n    .then((user) => {\r\n        localStorage.setItem('user', JSON.stringify(user));\r\n    });\r\n}\r\n\r\nexport {\r\n    login,\r\n}\r\n","import { authServices } from '../../services';\r\n\r\nconst login = (username, password) => {\r\n    const success = (user) => {\r\n        return {\r\n            type: 'LOGIN_SUCCEEDED',\r\n            payload: user,\r\n        };\r\n    }\r\n\r\n    const failure = (err) => {\r\n        return {\r\n            type: 'LOGIN_FAILED',\r\n            payload: err,\r\n        }\r\n    }\r\n\r\n    return (dispatch) => {\r\n        authServices.login(username, password)\r\n        .then((user) => {\r\n            console.log(\"WORKING\", user)\r\n            dispatch(success(user));\r\n        },\r\n        (error) => {\r\n            dispatch(failure(error));\r\n        });\r\n    }\r\n}\r\n\r\nexport {\r\n    login,\r\n}\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { authActions } from '../../redux/actions';\r\n\r\n\r\n/**\r\n * Login page layout as a component.\r\n * \r\n * @param {object} props\r\n * @param {Callback} props.dispatch - React-redux's store.dispatch()\r\n * @constructor\r\n */\r\nconst LoginPage = (props) => {\r\n\r\n    /**\r\n     * React hooks.\r\n     *  \r\n     * Hooks so we can use controlled inputs.\r\n     */\r\n    const [username, setUsername] = React.useState('');\r\n    const [password, setPassword] = React.useState('');\r\n\r\n\r\n    /**\r\n     * Private submission handler for our login form.\r\n     * \r\n     * @param {object} evt - Event object fired by the DOM.\r\n     */\r\n    const _submitHandler = async (evt) => {\r\n        console.log(props);\r\n        const {dispatch} = props;\r\n        evt.preventDefault();\r\n        const blah = dispatch(authActions.login(username, password));\r\n\r\n\r\n    }\r\n\r\n    const _testProtected = async (evt) => {\r\n        evt.preventDefault();\r\n\r\n    }\r\n\r\n    const _testRefresh = async (evt) => {\r\n        evt.preventDefault();\r\n\r\n    }\r\n\r\n    const _testLogout = async (evt) => {\r\n        evt.preventDefault();\r\n\r\n    }\r\n    return (\r\n        <div>\r\n            <form onSubmit={_submitHandler}>\r\n                <input type=\"text\" name=\"username\" placeholder=\"username\" onChange={(evt) => setUsername(evt.target.value)}></input>\r\n                <input type=\"password\" name=\"password\" placeholder=\"password\" onChange={(evt) => setPassword(evt.target.value)}></input>\r\n                <button type=\"submit\">Login</button>\r\n            </form>\r\n\r\n            <hr />\r\n            <form onSubmit={_testProtected}>\r\n                <button type=\"submit\">Test Protected</button>\r\n            </form>\r\n            <hr />\r\n            <form onSubmit={_testRefresh}>\r\n                <button type=\"submit\">Test Refresh</button>\r\n            </form>\r\n            <hr />\r\n            <form onSubmit={_testLogout}>\r\n                <button type=\"submit\">Test Logout</button>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        user: state.user,\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(LoginPage);\r\n","import React from 'react';\nimport {\n    BrowserRouter,\n    Switch,\n    Route\n} from 'react-router-dom';\nimport { Provider } from 'react-redux';\n\n\nimport makeStore from'./redux/store';\n\nimport LoginPage from './pages/LoginPage';\n\n/**\n * Top-level component called directly by ReactDOM.render().\n */\nconst App = () => {\n    return (\n        <Provider store={makeStore()}>\n            <BrowserRouter>\n                <Switch>\n                    <Route path='/'>\n                        <LoginPage />\n                    </Route>\n                </Switch>\n            </BrowserRouter>\n        </Provider>\n\n    )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n/**\n * Entry point for our react application.\n */\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}