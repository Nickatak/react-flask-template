(this.webpackJsonpcomp=this.webpackJsonpcomp||[]).push([[0],{37:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"handleResponse",(function(){return S}));var c={};n.r(c),n.d(c,"login",(function(){return I}));var a={};n.r(a),n.d(a,"login",(function(){return D}));var u=n(2),o=n(0),s=n.n(o),i=n(13),p=n.n(i),f=n(25),l=n(3),j=n(15),d=n(9),b=n(24),h=JSON.parse(localStorage.getItem("user")),O=h?{loggedIn:!0,user:h}:{loggedIn:!1};var m=Object(d.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCEEDED":return{loggedIn:!0,user:t.payload};case"LOGIN_FAILED":case"LOGOUT":return{loggedIn:!1};default:return e}}}),v=function(){return Object(d.d)(m,Object(d.a)(b.a))},g=n(7),x=n.n(g),y=n(10),w=n(21),S=function(e){return e.text().then((function(t){var n=t&&JSON.parse(t);if(!e.ok){401===e.status||e.status;var r=n||e.statusText;return Promise.reject(r)}return n}))},I=function(){var e=Object(y.a)(x.a.mark((function e(t,n){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})},e.abrupt("return",fetch("/auth/obtain",c).then(r.handleResponse).then((function(e){!0===e.loggedIn?localStorage.setItem("user",JSON.stringify(e)):localStorage.removeItem("user")})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=function(e,t){return function(n){c.login(e,t).then((function(e){n(function(e){return{type:"LOGIN_SUCCEEDED",payload:e}}(e))}),(function(e){n({type:"LOGIN_FAILED",payload:e})}))}},E=Object(j.b)((function(e){return{user:e.user}}))((function(e){var t=s.a.useState(""),n=Object(w.a)(t,2),r=n[0],c=n[1],o=s.a.useState(""),i=Object(w.a)(o,2),p=i[0],f=i[1];console.log(e);var l=e.dispatch,j=function(){var e=Object(y.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),l(a.login(r,p));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(y.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(y.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(y.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{children:[Object(u.jsxs)("form",{onSubmit:j,children:[Object(u.jsx)("input",{type:"text",name:"username",placeholder:"username",onChange:function(e){return c(e.target.value)}}),Object(u.jsx)("input",{type:"password",name:"password",placeholder:"password",onChange:function(e){return f(e.target.value)}}),Object(u.jsx)("button",{type:"submit",children:"Login"})]}),Object(u.jsx)("hr",{}),Object(u.jsx)("form",{onSubmit:d,children:Object(u.jsx)("button",{type:"submit",children:"Test Protected"})}),Object(u.jsx)("hr",{}),Object(u.jsx)("form",{onSubmit:b,children:Object(u.jsx)("button",{type:"submit",children:"Test Refresh"})}),Object(u.jsx)("hr",{}),Object(u.jsx)("form",{onSubmit:h,children:Object(u.jsx)("button",{type:"submit",children:"Test Logout"})})]})})),L=function(){return Object(u.jsx)(j.a,{store:v(),children:Object(u.jsx)(f.a,{children:Object(u.jsx)(l.c,{children:Object(u.jsx)(l.a,{path:"/",children:Object(u.jsx)(E,{})})})})})};p.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(L,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.6f5c2591.chunk.js.map