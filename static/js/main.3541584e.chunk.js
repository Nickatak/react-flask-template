(this.webpackJsonpcomp=this.webpackJsonpcomp||[]).push([[0],{35:function(t,e){},38:function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"login",(function(){return w}));var c={};n.r(c),n.d(c,"login",(function(){return S}));var a=n(2),u=n(0),o=n.n(u),s=n(13),i=n.n(s),p=n(25),f=n(3),j=n(15),l=n(9),b=n(24),d=(n(35).sendRequest,JSON.parse(localStorage.getItem("user"))),h=d?{loggedIn:!0,user:d}:{loggedIn:!1};var O=Object(l.c)({user:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LOGIN_SUCCEEDED":return{loggedIn:!0,user:e.payload};case"LOGIN_FAILED":case"LOGOUT":return{loggedIn:!1};default:return t}}}),m=function(){return Object(l.d)(O,Object(l.a)(b.a))},g=n(7),v=n.n(g),x=n(10),y=n(21),w=function(){var t=Object(x.a)(v.a.mark((function t(e,n){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:n})},t.abrupt("return",fetch("/auth/obtain",r).then((function(t){localStorage.setItem("user",JSON.stringify(t))})));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),S=function(t,e){return function(n){r.login(t,e).then((function(t){n(function(t){return{type:"LOGIN_SUCCEEDED",payload:t}}(t))}),(function(t){n({type:"LOGIN_FAILED",payload:t})}))}},I=Object(j.b)()((function(t){var e=t.dispatch,n=o.a.useState(""),r=Object(y.a)(n,2),u=r[0],s=r[1],i=o.a.useState(""),p=Object(y.a)(i,2),f=p[0],j=p[1];console.log(e);var l=function(){var t=Object(x.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e(c.login(u,f));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=Object(x.a)(v.a.mark((function t(e){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(x.a)(v.a.mark((function t(e){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(x.a)(v.a.mark((function t(e){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsxs)("form",{onSubmit:l,children:[Object(a.jsx)("input",{type:"text",name:"username",placeholder:"username",onChange:function(t){return s(t.target.value)}}),Object(a.jsx)("input",{type:"password",name:"password",placeholder:"password",onChange:function(t){return j(t.target.value)}}),Object(a.jsx)("button",{type:"submit",children:"Login"})]}),Object(a.jsx)("hr",{}),Object(a.jsx)("form",{onSubmit:b,children:Object(a.jsx)("button",{type:"submit",children:"Test Protected"})}),Object(a.jsx)("hr",{}),Object(a.jsx)("form",{onSubmit:d,children:Object(a.jsx)("button",{type:"submit",children:"Test Refresh"})}),Object(a.jsx)("hr",{}),Object(a.jsx)("form",{onSubmit:h,children:Object(a.jsx)("button",{type:"submit",children:"Test Logout"})})]})})),D=function(){return Object(a.jsx)(j.a,{store:m(),children:Object(a.jsx)(p.a,{children:Object(a.jsx)(f.c,{children:Object(a.jsx)(f.a,{path:"/",children:Object(a.jsx)(I,{})})})})})};i.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(D,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.3541584e.chunk.js.map